import{D as h}from"./index.CQkWGOce.js";import{b as _,ay as P,Q as b}from"./studio-component.5JEdvz6o.js";import{a as f}from"./index.EmWCQ-Q3.js";import"./client.B76MnFfN.js";function E(u){const e=_.c(8),{comlink:s,type:t,previewKitConnection:r,loadersConnection:n}=u;let c,l;e[0]!==u.id?(l=P(u.id),e[0]=u.id,e[1]=l):l=e[1],c=l;const o=c,{draft:v,published:i,ready:m}=b(o,t,"low"),d=r==="connected"||n==="connected";if(m&&v||i){let a;return e[2]!==s||e[3]!==v||e[4]!==o||e[5]!==d||e[6]!==i?(a=h.jsx(x,{comlink:s,draft:v,livePreviewEnabled:d,published:i},o),e[2]=s,e[3]=v,e[4]=o,e[5]=d,e[6]=i,e[7]=a):a=e[7],a}return null}function x(u){const e=_.c(14),{comlink:s,draft:t,published:r,livePreviewEnabled:n}=u,[c,l]=f.useState(t),[o,v]=f.useState(r);let i;e[0]!==s||e[1]!==t||e[2]!==n||e[3]!==c?._rev||e[4]!==o?._rev||e[5]!==r?(i=()=>{c?._rev!==t?._rev&&(f.startTransition(()=>l(t)),t&&s?.post("presentation/refresh",{source:"mutation",livePreviewEnabled:n,document:p(t)})),o?._rev!==r?._rev&&(f.startTransition(()=>v(r)),r&&s?.post("presentation/refresh",{source:"mutation",livePreviewEnabled:n,document:p(r)}))},e[0]=s,e[1]=t,e[2]=n,e[3]=c?._rev,e[4]=o?._rev,e[5]=r,e[6]=i):i=e[6];const m=c?._rev,d=o?._rev;let a;return e[7]!==s||e[8]!==t||e[9]!==n||e[10]!==r||e[11]!==m||e[12]!==d?(a=[s,t,n,m,d,r],e[7]=s,e[8]=t,e[9]=n,e[10]=r,e[11]=m,e[12]=d,e[13]=a):a=e[13],f.useEffect(i,a),null}function p(u){const{_id:e,_type:s,_rev:t,slug:r}=u;return{_id:e,_type:s,_rev:t,slug:r}}var D=f.memo(E);export{D as default};
